<%= render 'layouts/message' %>

<h1>Listing Products</h1>

<% if @products.blank? %>

  <div class="alert alert-danger" role="alert">
    <p>No products were found.</p>
  </div>

<% else %>

  <div class="panel panel-default">

    <div class="table table-responsive">

      <table class="table-bordered">
        <thead>
          <tr>
            <th><span>Actions</span></th>
            <th><span>Code</span></th>
            <th><span>Bar Code</span></th>
            <th><span>Description</span></th>
            <th><span>Identification</span></th>
            <th><span>NCM</span></th>
            <th><span>Brand</span></th>
            <th><span>Categories</span></th>
            <th><span>Unity</span></th>
            <th><span>Cost</span></th>
            <th><span>Selling Values</span></th>
            <th><span>Observation</span></th>
            <th><span>Provider</span></th>
            <th><span>Stock</span></th>
            <th><span>Min Stock</span></th>
            <th><span>Max Stock</span></th>
            <th><span>Stock Purchase</span></th>
            <th><span>Factor</span></th>
            <th><span>Weight</span></th>
            <th><span>Size</span></th>
            <th><span>Inactive</span></th>
            <th><span>Kind</span></th>
            <th><span>Gender</span></th>
            <th><span>Composition</span></th>
            <th><span>Feedstock</span></th>
            <th><span>Expedient Material</span></th>
            <th><span>For Sale</span></th>
            <th><span>Currency</span></th>
            <th><span>IPI</span></th>
          </tr>
        </thead>

        <tbody>
          <% @products.each do |product| %>
            <tr>
              <td>
                <span class="actions-span">

                  <!-- Details Button -->
                  <div class="action-button">
                    <%= button_to product, method: :get, :class => "btn btn-default", :'aria-label' => "Left Align" do %>
                      <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                    <% end %>
                  </div>
                  <!-- Details Button -->

                  <!-- Edit Button -->
                  <div class="action-button">
                    <%= button_to edit_product_path(product), method: :get, :class => "btn btn-default", :'aria-label' => "Left Align" do %>
                      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    <% end %>
                  </div>
                  <!-- Edit Button -->

                  <!-- Delete Button -->
                  <div class="action-button">
                    <%= button_tag :data => { id: product.id, toggle: 'modal', target: '#remove-product-modal' }, :class => "btn btn-default remove-product", :'aria-label' => "Left Align" do %>
                      <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    <% end %>
                  </div>
                  <!-- Delete Button -->

                </span>
              </td>
              <td><span><%= product.code %></span></td>
              <td><span><%= product.bar_code %></span></td>
              <td><span><%= product.description %></span></td>
              <td><span><%= product.identification %></span></td>
              <td><span><%= product.ncm %></span></td>
              <td><span><%= product.brand %></span></td>
              <td><span><%= product.categories.map(&:description).join(", ") %></span></td>
              <td><span><%= product.unity %></span></td>
              <td><span><%= product.cost %></span></td>
              <td><span><%= product.selling_values.map(&:value).join(", ") %></span></td>
              <td><span><%= product.observation %></span></td>
              <td><span><%= product.provider %></span></td>
              <td><span><%= product.stock %></span></td>
              <td><span><%= product.min_stock %></span></td>
              <td><span><%= product.max_stock %></span></td>
              <td><span><%= product.stock_purchase %></span></td>
              <td><span><%= product.factor %></span></td>
              <td><span><%= product.weight %></span></td>
              <td><span><%= product.size %></span></td>
              <td><span><%= product.inactive %></span></td>
              <td><span><%= product.kind %></span></td>
              <td><span><%= product.gender %></span></td>
              <td><span><%= product.composition %></span></td>
              <td><span><%= product.feedstock %></span></td>
              <td><span><%= product.expedient_material %></span></td>
              <td><span><%= product.for_sale %></span></td>
              <td><span><%= product.currency %></span></td>
              <td><span><%= product.ipi %></span></td>
            </tr>
          <% end %>
        </tbody>
      </table>

    </div>

  </div>

<% end %>

<div class="btn-toolbar">

  <div class="btn-group">
    <%= button_to new_product_path, method: :get, :class => "btn btn-primary" do %>
      <span class="glyphicon glyphicon-plus"></span> New Product
    <% end %>
  </div>

</div>

<!-- Modal -->
<div class="modal fade" id="remove-product-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Destroy Product</h4>
      </div>
      <div class="modal-body">
        <%= hidden_field_tag :remove_id %>
        Are you sure that you want to destroy this product?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button id="confirm-destroy" type="button" class="btn btn-danger">Destroy</button>
      </div>
    </div>
  </div>
</div>
